[
    {
        "client_msg_id": "07d543c2-77a5-4808-aea0-c293b1b190de",
        "type": "message",
        "text": "A question that came up in a discussion this morning:\n\nSuppose you want to publish a command-line utility program, meant to be easy to use. Doing Web retrieval and some post-processing. Around 500 lines in a typical scripting language, but with dependencies (in that language plus C libraries).\n\nIt looks like packaging such a tool for all popular platforms (i.e. package managers) will be a lot more work than actually writing the code.\n\nTrue? Any way to avoid this?\n\nIdeas so far: don't use a scripting language, but something with a compiler that can produce portable executables for every major platform. Recommendations in that category so far: Go, Rust, Racket, Common Lisp. I have doubts that all of these can handle \"plus C libraries\", but it's a start.\n\nDoes anyone here have actual experience with this kind of project?",
        "user": "UJBAJNFLK",
        "ts": "1697035756.918399",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "A6doN",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "A question that came up in a discussion this morning:\n\nSuppose you want to publish a command-line utility program, meant to be easy to use. Doing Web retrieval and some post-processing. Around 500 lines in a typical scripting language, but with dependencies (in that language plus C libraries).\n\nIt looks like packaging such a tool for all popular platforms (i.e. package managers) will be a lot more work than actually writing the code.\n\nTrue? Any way to avoid this?\n\nIdeas so far: don't use a scripting language, but something with a compiler that can produce portable executables for every major platform. Recommendations in that category so far: Go, Rust, Racket, Common Lisp. I have doubts that all of these can handle \"plus C libraries\", but it's a start.\n\nDoes anyone here have actual experience with this kind of project?"
                            }
                        ]
                    }
                ]
            }
        ],
        "team": "T5TCAFTA9",
        "thread_ts": "1697035756.918399",
        "reply_count": 17,
        "reply_users_count": 9,
        "latest_reply": "1697304089.878159",
        "reply_users": [
            "UFEQUBNNT",
            "U04QB9V2RNG",
            "UKJGU23KP",
            "UDQBTJ211",
            "UE1JQM9HQ",
            "UJBAJNFLK",
            "U013ZLJARC7",
            "U05UBCXHWM6",
            "U05PESXCC2E"
        ],
        "is_locked": false,
        "subscribed": false
    },
    {
        "client_msg_id": "172EF0E4-08CA-4080-AC4B-FDD03A9C27A0",
        "type": "message",
        "text": "Do you just want a package, or do you wanted it listed in all the registries for installation by name?",
        "user": "UFEQUBNNT",
        "ts": "1697036543.534549",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "R6JvQ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Do you just want a package, or do you wanted it listed in all the registries for installation by name?"
                            }
                        ]
                    }
                ]
            }
        ],
        "team": "T5TCAFTA9",
        "thread_ts": "1697035756.918399",
        "parent_user_id": "UJBAJNFLK"
    },
    {
        "client_msg_id": "12487e64-d5bf-49f2-95b4-ba5a53fab3b1",
        "type": "message",
        "text": "It's relatively new, but if you're open to experimenting, take a look at <https://pkgx.sh/>",
        "user": "U04QB9V2RNG",
        "ts": "1697039165.774019",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "I1IoI",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "It's relatively new, but if you're open to experimenting, take a look at "
                            },
                            {
                                "type": "link",
                                "url": "https://pkgx.sh/"
                            }
                        ]
                    }
                ]
            }
        ],
        "team": "T5TCAFTA9",
        "thread_ts": "1697035756.918399",
        "parent_user_id": "UJBAJNFLK"
    },
    {
        "client_msg_id": "A4CCB684-A8E7-452B-84DF-9D4C1F8C3C14",
        "type": "message",
        "text": "I can\u2019t actually evaluate whether it\u2019s a good idea, but <https://justine.lol/ape.html|https://justine.lol/ape.html> exists",
        "user": "UKJGU23KP",
        "ts": "1697042933.969869",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "A+kDQ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I can\u2019t actually evaluate whether it\u2019s a good idea, but "
                            },
                            {
                                "type": "link",
                                "url": "https://justine.lol/ape.html",
                                "text": "https://justine.lol/ape.html"
                            },
                            {
                                "type": "text",
                                "text": " exists"
                            }
                        ]
                    }
                ]
            }
        ],
        "team": "T5TCAFTA9",
        "edited": {
            "user": "UKJGU23KP",
            "ts": "1697042947.000000"
        },
        "thread_ts": "1697035756.918399",
        "parent_user_id": "UJBAJNFLK",
        "reactions": [
            {
                "name": "joy",
                "users": [
                    "U03JUAWDVSR"
                ],
                "count": 1
            }
        ]
    },
    {
        "client_msg_id": "c7d2600a-145a-414b-935d-d4f2b74474c1",
        "type": "message",
        "text": "I think runnable fat .jar is probably the best bet, like the Apache Tika standalone app. It has about a million dependencies under the hood but the user experience is just to download a single executable that runs on all platforms (that have java)",
        "user": "UDQBTJ211",
        "ts": "1697043516.929519",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "6/tJW",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I think runnable fat .jar is probably the best bet, like the Apache Tika standalone app. It has about a million dependencies under the hood but the user experience is just to download a single executable that runs on all platforms (that have java)"
                            }
                        ]
                    }
                ]
            }
        ],
        "team": "T5TCAFTA9",
        "thread_ts": "1697035756.918399",
        "parent_user_id": "UJBAJNFLK"
    },
    {
        "client_msg_id": "81D42C08-86A4-4990-AAE8-DD3E3244C67E",
        "type": "message",
        "text": "<@UJBAJNFLK> did you consider Pharo+C?",
        "user": "UE1JQM9HQ",
        "ts": "1697044659.305389",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "9oHWo",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "UJBAJNFLK"
                            },
                            {
                                "type": "text",
                                "text": " did you consider Pharo+C?"
                            }
                        ]
                    }
                ]
            }
        ],
        "team": "T5TCAFTA9",
        "thread_ts": "1697035756.918399",
        "parent_user_id": "UJBAJNFLK"
    },
    {
        "client_msg_id": "a38448d7-74a4-4c43-8d73-ad1d450b39b3",
        "type": "message",
        "text": "<@UE1JQM9HQ> Briefly. I have never seen a command-line tool written in Pharo in the wild, so I can only speculate how that would be distributed. For plain Pharo code, I imagine a tarball containing the VM and the image, plus a script that takes care of running the VM with the right parameters to find the image. The obstacle I see is the C dependencies. For macOS and Windows, I could add the binaries to the tarball. For Linux, there is too much heterogeneity to distribute binaries, so I'd have to find a way to make the Pharo code find the libraries wherever the system package manager has put them. And that's something that only the package manager knows for sure.\n\nScientific computing environments are particularly challenging because \"Linux\" really means \"anything with a Linux kernel\". There's high-performance computing centres running prehistoric CentOS versions (\"we prefer known bugs to unknown bugs\"), nerd laptops with the latest exotic distribution, and in between more standard installations such as Debian or Ubuntu, in any versions from ten years ago to bleeding edge.",
        "user": "UJBAJNFLK",
        "ts": "1697093080.041989",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "R/Om9",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "UE1JQM9HQ"
                            },
                            {
                                "type": "text",
                                "text": " Briefly. I have never seen a command-line tool written in Pharo in the wild, so I can only speculate how that would be distributed. For plain Pharo code, I imagine a tarball containing the VM and the image, plus a script that takes care of running the VM with the right parameters to find the image. The obstacle I see is the C dependencies. For macOS and Windows, I could add the binaries to the tarball. For Linux, there is too much heterogeneity to distribute binaries, so I'd have to find a way to make the Pharo code find the libraries wherever the system package manager has put them. And that's something that only the package manager knows for sure.\n\nScientific computing environments are particularly challenging because \"Linux\" really means \"anything with a Linux kernel\". There's high-performance computing centres running prehistoric CentOS versions (\"we prefer known bugs to unknown bugs\"), nerd laptops with the latest exotic distribution, and in between more standard installations such as Debian or Ubuntu, in any versions from ten years ago to bleeding edge."
                            }
                        ]
                    }
                ]
            }
        ],
        "team": "T5TCAFTA9",
        "thread_ts": "1697035756.918399",
        "parent_user_id": "UJBAJNFLK"
    },
    {
        "client_msg_id": "bad28795-e1a3-4f98-bfb8-3ae480095e70",
        "type": "message",
        "text": "<https://x.com/borkdude/status/1712073551992307852?s=20>",
        "user": "U013ZLJARC7",
        "ts": "1697112347.074239",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "+EhD4",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "link",
                                "url": "https://x.com/borkdude/status/1712073551992307852?s=20"
                            }
                        ]
                    }
                ]
            }
        ],
        "team": "T5TCAFTA9",
        "attachments": [
            {
                "image_url": "https://pbs.twimg.com/media/F8KBwQ1XcAEsr2D.jpg:large",
                "image_width": 1880,
                "image_height": 714,
                "image_bytes": 108684,
                "from_url": "https://x.com/borkdude/status/1712073551992307852?s=20",
                "service_icon": "http://abs.twimg.com/favicons/twitter.3.ico",
                "id": 1,
                "original_url": "https://x.com/borkdude/status/1712073551992307852?s=20",
                "fallback": "X (formerly Twitter): (\u03bb. borkdude) :seedling: on X",
                "text": "You can now create self-contained binaries from #babashka (from development) using an uberjar\n\n<https://t.co/xPq4vsbwng>\n\nGive it a spin if you're interested in this!\n\n#clojure",
                "title": "(\u03bb. borkdude) :seedling: on X",
                "title_link": "https://x.com/borkdude/status/1712073551992307852?s=20",
                "service_name": "X (formerly Twitter)"
            }
        ],
        "thread_ts": "1697035756.918399",
        "parent_user_id": "UJBAJNFLK",
        "reactions": [
            {
                "name": "heart",
                "users": [
                    "UJBAJNFLK"
                ],
                "count": 1
            },
            {
                "name": "cool",
                "users": [
                    "U04QB9V2RNG"
                ],
                "count": 1
            }
        ]
    },
    {
        "client_msg_id": "2b9c3b3a-46b1-411c-828a-1034681f3955",
        "type": "message",
        "text": "There are a thousand things to optimize over in this question, but this is one way.",
        "user": "U013ZLJARC7",
        "ts": "1697112370.150479",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "m776p",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "There are a thousand things to optimize over in this question, but this is one way."
                            }
                        ]
                    }
                ]
            }
        ],
        "team": "T5TCAFTA9",
        "thread_ts": "1697035756.918399",
        "parent_user_id": "UJBAJNFLK"
    },
    {
        "client_msg_id": "54ada62b-fb7c-468c-9920-3a656688e7a2",
        "type": "message",
        "text": "That looks nice, thanks!\nIt doesn't mention C dependencies though...",
        "user": "UJBAJNFLK",
        "ts": "1697117568.120399",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ufg2a",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "That looks nice, thanks!\nIt doesn't mention C dependencies though..."
                            }
                        ]
                    }
                ]
            }
        ],
        "team": "T5TCAFTA9",
        "edited": {
            "user": "UJBAJNFLK",
            "ts": "1697117610.000000"
        },
        "thread_ts": "1697035756.918399",
        "parent_user_id": "UJBAJNFLK"
    },
    {
        "client_msg_id": "5e6272f7-55a0-4930-b609-7ee6b9b3db19",
        "type": "message",
        "text": "There\u2019s FFI, but you still have the problem of whether the libs you want to use are installed. The maximally safe case is to static link everything into a platform specific binary using, zB `go`.",
        "user": "U013ZLJARC7",
        "ts": "1697120811.058769",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "lOZXX",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "There\u2019s FFI, but you still have the problem of whether the libs you want to use are installed. The maximally safe case is to static link everything into a platform specific binary using, zB "
                            },
                            {
                                "type": "text",
                                "text": "go",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "."
                            }
                        ]
                    }
                ]
            }
        ],
        "team": "T5TCAFTA9",
        "thread_ts": "1697035756.918399",
        "parent_user_id": "UJBAJNFLK"
    },
    {
        "client_msg_id": "9F667B40-AE1A-4D1A-856D-9DE78E3382EB",
        "type": "message",
        "text": "Cosmopolitan C is surprisingly powerful! ",
        "user": "U05UBCXHWM6",
        "ts": "1697127502.229609",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "RwU4Q",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Cosmopolitan C is surprisingly powerful! "
                            }
                        ]
                    }
                ]
            }
        ],
        "team": "T5TCAFTA9",
        "thread_ts": "1697035756.918399",
        "parent_user_id": "UJBAJNFLK"
    },
    {
        "client_msg_id": "05b5af47-6469-4be4-b8e7-908c63384879",
        "type": "message",
        "text": "<@U013ZLJARC7> It's either that, or integration of my code into whatever build system the target platform uses. Both options require a lot of overhead effort.\n<@U05UBCXHWM6> Found it (<https://justine.lol/cosmopolitan/>) - that's amazing! Not sure I'd be willing to write my code in C in order to use it, but it's pretty cool :-)",
        "user": "UJBAJNFLK",
        "ts": "1697129273.814289",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "1Y4Ig",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "user",
                                "user_id": "U013ZLJARC7"
                            },
                            {
                                "type": "text",
                                "text": " It's either that, or integration of my code into whatever build system the target platform uses. Both options require a lot of overhead effort.\n"
                            },
                            {
                                "type": "user",
                                "user_id": "U05UBCXHWM6"
                            },
                            {
                                "type": "text",
                                "text": " Found it ("
                            },
                            {
                                "type": "link",
                                "url": "https://justine.lol/cosmopolitan/"
                            },
                            {
                                "type": "text",
                                "text": ") - that's amazing! Not sure I'd be willing to write my code in C in order to use it, but it's pretty cool :-)"
                            }
                        ]
                    }
                ]
            }
        ],
        "team": "T5TCAFTA9",
        "thread_ts": "1697035756.918399",
        "parent_user_id": "UJBAJNFLK"
    },
    {
        "client_msg_id": "DD3976F0-87BE-4C05-9706-D68408A903AC",
        "type": "message",
        "text": "Yeah! It\u2019s wild. I wonder how hard it would be to make a language that compiles to and has bindings for cosmo C",
        "user": "U05UBCXHWM6",
        "ts": "1697129315.224759",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ATI/g",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Yeah! "
                            },
                            {
                                "type": "text",
                                "text": "It\u2019s"
                            },
                            {
                                "type": "text",
                                "text": " wild. I wonder how hard it would be to make a language that compiles to and has bindings for cosmo C"
                            }
                        ]
                    }
                ]
            }
        ],
        "team": "T5TCAFTA9",
        "thread_ts": "1697035756.918399",
        "parent_user_id": "UJBAJNFLK"
    },
    {
        "client_msg_id": "74af80df-7655-4b3e-8a87-ee9c16db9241",
        "type": "message",
        "text": "Not so much a language but a toolchain, right? Any language that can be compiled to C should be adaptable rather easily. That includes C++, Fortran, Scheme, Common Lisp, and probably many others.",
        "user": "UJBAJNFLK",
        "ts": "1697129497.095539",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "nkOXz",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Not so much a language but a toolchain, right? Any language that can be compiled to C should be adaptable rather easily. That includes C++, Fortran, Scheme, Common Lisp, and probably many others."
                            }
                        ]
                    }
                ]
            }
        ],
        "team": "T5TCAFTA9",
        "thread_ts": "1697035756.918399",
        "parent_user_id": "UJBAJNFLK",
        "reactions": [
            {
                "name": "heart",
                "users": [
                    "U05UBCXHWM6"
                ],
                "count": 1
            }
        ]
    },
    {
        "client_msg_id": "e0e48423-933b-4468-962a-d808fc3df337",
        "type": "message",
        "text": "Node with WebAseembly? <https://nodejs.dev/en/learn/nodejs-with-webassembly/> I don't have direct experience with WASM in Node, but many platforms can run Node.",
        "user": "U05PESXCC2E",
        "ts": "1697237447.297159",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "GN81M",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Node with WebAseembly? "
                            },
                            {
                                "type": "link",
                                "url": "https://nodejs.dev/en/learn/nodejs-with-webassembly/"
                            },
                            {
                                "type": "text",
                                "text": " I don't have direct experience with WASM in Node, but many platforms can run Node."
                            }
                        ]
                    }
                ]
            }
        ],
        "team": "T5TCAFTA9",
        "thread_ts": "1697035756.918399",
        "parent_user_id": "UJBAJNFLK"
    },
    {
        "client_msg_id": "E927520D-9F96-4927-89E5-E9A12F208EBC",
        "type": "message",
        "text": "But is it possible to create stand-alone binaries? If users have to install node, installation is too complicated.",
        "user": "UJBAJNFLK",
        "ts": "1697285804.696879",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "8FxEN",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "But is it possible to create stand-alone binaries"
                            },
                            {
                                "type": "text",
                                "text": "?"
                            },
                            {
                                "type": "text",
                                "text": " If users have to install node, installation is too complicated"
                            },
                            {
                                "type": "text",
                                "text": "."
                            }
                        ]
                    }
                ]
            }
        ],
        "team": "T5TCAFTA9",
        "thread_ts": "1697035756.918399",
        "parent_user_id": "UJBAJNFLK"
    },
    {
        "client_msg_id": "d35621dd-6337-4f89-9484-4ca0b591915f",
        "type": "message",
        "text": "Looks like there's experimental work, but yeah I wouldn't depend on that yet. <https://nodejs.org/api/single-executable-applications.html>. There is however, pkg: <https://medium.com/@tech_girl/deploy-your-node-js-application-as-a-single-executable-4103a2508dd7> I may experiment with this myself, it looks interesting. The binary will be fairly large of course, since it's the whole JavaScript VM + your app :slightly_smiling_face:",
        "user": "U05PESXCC2E",
        "ts": "1697304089.878159",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "hTtP/",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Looks like there's experimental work, but yeah I wouldn't depend on that yet. "
                            },
                            {
                                "type": "link",
                                "url": "https://nodejs.org/api/single-executable-applications.html"
                            },
                            {
                                "type": "text",
                                "text": ". There is however, pkg: "
                            },
                            {
                                "type": "link",
                                "url": "https://medium.com/@tech_girl/deploy-your-node-js-application-as-a-single-executable-4103a2508dd7"
                            },
                            {
                                "type": "text",
                                "text": " I may experiment with this myself, it looks interesting. The binary will be fairly large of course, since it's the whole JavaScript VM + your app "
                            },
                            {
                                "type": "emoji",
                                "name": "slightly_smiling_face",
                                "unicode": "1f642"
                            }
                        ]
                    }
                ]
            }
        ],
        "team": "T5TCAFTA9",
        "edited": {
            "user": "U05PESXCC2E",
            "ts": "1697307123.000000"
        },
        "thread_ts": "1697035756.918399",
        "parent_user_id": "UJBAJNFLK",
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "UJBAJNFLK"
                ],
                "count": 1
            }
        ]
    }
]