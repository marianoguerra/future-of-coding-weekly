
<!doctype html>
<html>
  <head>
    <meta charset=utf-8>
    <title>Future of Coding History</title>
    <link rel="stylesheet" href="https://marianoguerra.github.io/future-of-coding-weekly/history/style.css">
  </head>
  <body>
    <div id="ui">
      <a id="logo" href="https://futureofcoding.org">
        <img src="https://marianoguerra.github.io/future-of-coding-weekly/history/logo.svg" alt="Future of Coding History">
      </a>
      <div id="small-logo">
        <a href="https://futureofcoding.org">Future of Coding</a> History
      </div>
      <div id="center">
        <h4>
          You are viewing archived messages.<br>
          Go <a href="https://marianoguerra.github.io/future-of-coding-weekly/history">here</a> to search the history.
        </h4>
      </div>
      <div id="actions"></div>
    </div>
    <div id="msgs-output">
<div id="2024-03-10T05:49:45.779Z" class="post"><span class="user"></span> <a href="./?fromDate=2024-03-07&amp;toDate=2024-03-13&amp;channel=devlog-together&amp;filter=#2024-03-10T05:49:45.779Z" class="date">üï∞Ô∏è 2024-03-10 05:49:45</a> <div class="message"><p>...</p>
</div> <div class="attachments"></div> <div class="files"></div> <div class="replies"><div id="2024-03-11T07:47:09.125Z" class="reply"><span class="user">Kartik Agaram</span> <a href="./?fromDate=2024-03-08&amp;toDate=2024-03-14&amp;channel=devlog-together&amp;filter=#2024-03-11T07:47:09.125Z" class="date">2024-03-11 07:47:09</a> <div class="message"><p>Here's a playable iteration of the game: <a href="https://akkartik.itch.io/sokoban">akkartik.itch.io/sokoban</a></p>
</div> <div class="attachments"></div> <div class="files"></div></div></div></div><div id="2024-03-12T17:13:39.920Z" class="post"><span class="user">Kartik Agaram</span> <a href="./?fromDate=2024-03-09&amp;toDate=2024-03-15&amp;channel=devlog-together&amp;filter=#2024-03-12T17:13:39.920Z" class="date">2024-03-12 17:13:39</a> <div class="message"><p>A little thing like an 'edit' button introduces cascading issues:</p>
<ul><li>L√ñVE (in combination with mobile restrictions) won't let me modify code files in place. I have to overlay my changes in a new location.</li><li>But now I can't pick up any upgrades to my app. Upgrades modify code files in place, but any overlay persists (otherwise you'd completely lose your changes after upgrading).</li><li>But hey I have a programmable editor here! I'll just create a new file called 'scratch' with a one-liner to blow away the overlay. (With my app user's hat on, I know in this case my changes are minor in a way that I don't with my app developer's hat on.)</li><li>(A few hours later.) Wait, now none of my changes are having any effect. And they're completely blown away when I go back to the code.</li><li>ü§¶ Oh it's that 'scratch' file still hanging around. So it needs to be a 2-liner. I have to make any changes I want to the file system -- and then delete 'scratch' to make this a one-time operation.</li><li>I could try to create a screen of helpers for this, along with a comment that says, "insert file system operations here" after which is a delete of 'scratch'.</li></ul><p>In this way I find myself playing meta-Sokoban.. üôÑ</p>
<p>Tl;dr - the 'edit' button isn't really usable yet.</p>
<p>I  <em>really</em>  don't want to go down the road of building a compare and merge flow üôÑ</p>
</div> <div class="attachments"></div> <div class="files"></div> <div class="replies"><div id="2024-03-12T17:39:53.348Z" class="reply"><span class="user">Kartik Agaram</span> <a href="./?fromDate=2024-03-09&amp;toDate=2024-03-15&amp;channel=devlog-together&amp;filter=#2024-03-12T17:39:53.348Z" class="date">2024-03-12 17:39:53</a> <div class="message"><p>More devlog stuff.</p>
<p>I switched the next/previous level buttons to say just  <code>&gt;&gt;</code>  and  <code>&lt;&lt;</code> . This kills two birds with one stone:</p>
<ul><li>I was confusing the text in my "buttons" with the current level. In landscape mode the current level is on the top-left, but in portrait mode that rough location is where the button for going to the previous level goes. Only ever showing one number on screen improves matters.</li><li>My "buttons" were pretty atrocious, and now they're merely terrible, the text looks more vertically centered because it has no ascenders.</li></ul><p><a href="https://git.sr.ht/~akkartik/sokoban.love/commit/93432f0aa5">git.sr.ht/~akkartik/sokoban.love/commit/93432f0aa5</a></p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2024-03-13T09:11:42.641Z" class="reply"><span class="user">Konrad Hinsen</span> <a href="./?fromDate=2024-03-10&amp;toDate=2024-03-16&amp;channel=devlog-together&amp;filter=#2024-03-13T09:11:42.641Z" class="date">2024-03-13 09:11:42</a> <div class="message">
<blockquote><p>(With my app user's hat on, I know in this case my changes are minor in a way that I don't with my app developer's hat on.)</p>
</blockquote>
<p>Not having distinct hats sounds a lot like convivial technology.</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2024-03-13T09:50:20.565Z" class="reply"><span class="user">Kartik Agaram</span> <a href="./?fromDate=2024-03-10&amp;toDate=2024-03-16&amp;channel=devlog-together&amp;filter=#2024-03-13T09:50:20.565Z" class="date">2024-03-13 09:50:20</a> <div class="message"><p>Oh you and your idealism üôÇ</p>
<p>You can also think of it as compile time vs run-time. Convivial technology means I can go do unsafe things when I know what I'm doing, things I never want the computer to blindly do to me.</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2024-03-13T11:00:27.122Z" class="reply"><span class="user">Konrad Hinsen</span> <a href="./?fromDate=2024-03-10&amp;toDate=2024-03-16&amp;channel=devlog-together&amp;filter=#2024-03-13T11:00:27.122Z" class="date">2024-03-13 11:00:27</a> <div class="message"><p>I think convivial technology implies that you are yourself responsible for judging the safety of whatever you do. Though that's not an aspect I remember Ivan Illich talk about.</p>
</div> <div class="attachments"></div> <div class="files"></div></div></div></div><div id="2024-03-13T09:57:36.501Z" class="post"><span class="user">Kartik Agaram</span> <a href="./?fromDate=2024-03-10&amp;toDate=2024-03-16&amp;channel=devlog-together&amp;filter=#2024-03-13T09:57:36.501Z" class="date">2024-03-13 09:57:36</a> <div class="message"><p>Simple shortest-path routing to reduce some of the drudgery in Sokoban. Integrated with undo.</p>
<p>Next up: routing while pushing a single crate without moving any other crates. That feels more complicated than this glorified breadth-first search. In particular, I'm not yet sure how to detect cycles. Moving a crate can involve being in the same place over and over again. I think I need to hash the player's location in combination with the crate's location ü§î</p>
</div> <div class="attachments"></div> <div class="files"><p>üé• <a href="http://history.futureofcoding.org/history/msg_files/F06/F06NVCX4T1V.webm">sokoban-empty-path.webm</a></p>
</div> <div class="replies"></div></div><div id="2024-03-14T15:29:35.780Z" class="post"><span class="user">Kartik Agaram</span> <a href="./?fromDate=2024-03-11&amp;toDate=2024-03-17&amp;channel=devlog-together&amp;filter=#2024-03-14T15:29:35.780Z" class="date">2024-03-14 15:29:35</a> <div class="message"><p>My solver can now push a single crate to a destination without moving any other crates. But I feel ambivalent about this. Devlog in üßµ</p>
</div> <div class="attachments"></div> <div class="files"><p>üé• <a href="http://history.futureofcoding.org/history/msg_files/F06/F06PN2WJYJY.webm">sokoban-solver.webm</a></p>
</div> <div class="replies"><div id="2024-03-14T15:40:13.938Z" class="reply"><span class="user">Kartik Agaram</span> <a href="./?fromDate=2024-03-11&amp;toDate=2024-03-17&amp;channel=devlog-together&amp;filter=#2024-03-14T15:40:13.938Z" class="date">2024-03-14 15:40:13</a> <div class="message"><p>12th: I first play level 64 (pictured above), which is a really great puzzle -- but also the steps are killing on my fingers on a touchscreen without any tactile feedback.</p>
<p>Tapping an empty square to get the player to go there (pictured in previous thread) is just 20 lines of code! All I need is a breadth-first search (BFS). I am encouraged. However, it only gets me one way across those steps. On the way down I'm carrying a crate. Next step: move a single crate from a starting point to an ending point without disturbing any other crates.</p>
<p>a hazy idea starts to form:</p>
<ul><li><p>assign each crate a unique id</p>
</li><li><p>add ability to select a crate and show some visual feedback when you do</p>
</li><li><p>do another BFS. Where the first time generates moves out of empty cells, here I want to generate moves out of either empty cells or the crate with the unique id I originally selected.</p>
</li></ul><p>I do the first two steps, but the third is still unclear. Will I need to make a copy of the board on each iteration of the BFS? I didn't for the first BFS.</p>
<p>13th: I wake up and open up the program again, and immediately have a flash of insight: BFS #2 needs to use BFS #1 as a primitive operation. For each candidate move, for each direction, use BFS #1 to move the player to the opposite side of the target crate. If that succeeds, add the direction to the BFS.</p>
<p>I'm operating in "plan space". The move to the opposite direction is just a plan, it doesn't mutate the board. Since a single crate moves throughout the BFS, I figure I don't need to copy the entire board each iteration. I can just track the position of that crate as a delta on the original position.</p>
<p>This plan doesn't need the unique crate ids anymore, but I haven't noticed that yet. They'll still come in handy in debugging, but I think the ensuing tale might have gone easier if I'd never added them.</p>
<p>Bugs as I encountered them:</p>
<ul><li>If we're already at the desired side of the crate we don't actually need to move. Distinguish this from a failed move.</li></ul><ul><li>Remember to actually play out the intermediate moves between the pushes in the plan. The path returned by BFS #2 is a tree of directions where BFS #1 was a simple list. (It could still be a list, but I'm glad in all the ensuing debugging for this bit of provenance: is a step in the plan a move or a push?)</li></ul><ul><li>Undo requires storing a third square for the location of the crate. (For moving the player yesterday I was storing just the initial and final location of the player.)</li></ul><ul><li>Oh wait, undo requires a  <em>fourth</em>  square. I was thinking of the squares muddily as player, crate and destination, but really it's initial and final squares of player and crate.</li></ul><ul><li>And we have to save the state of the final square of the player  <em>before</em>  we start running the plan.</li></ul><ul><li>I can't quite use BFS #1 directly as a step of BFS #2: I need it too to be aware that the square of the selected crate is empty and can be moved through. (I'm still thinking in terms of unique ids, but the penny is starting to drop.)</li></ul><ul><li>BFS #1 also needs the current location of the crate. It's a BFS over the board with 2 deltas: 1 square is forced to empty (original location of the selected crate, and 1 square is forced to occupied (current location of the selected crate, in the middle of a sequence of moves and pushes). At this point the penny drops that I don't need the unique id of crates anymore.</li></ul><ul><li>At this point I'm debugging plans 10s of steps long, generating 10s of candidates in the process. I realize the square forced to empty and the square forced to occupied can be the same -- in which case the square is occupied (the selected crate hasn't moved yet). It takes 2 attempts to get this right, and I start to think maybe I do need to make a copy of the level after all. Eventually I turn my complex conditional of  <code>and</code> s and  <code>or</code> s into a helper function with early returns, and the sun shines again.</li></ul><ul><li>A BFS naturally finds the shortest route, but by nesting 2 BFSs I was finding the route with the fewest crate pushes. To get optimal paths I have to start scanning the queue for the fewest number of total steps (counting moves and pushes)</li></ul><ul><li>Give up if destination is occupied. This is symmetric with the very first bug in this list.</li></ul><ul><li>Allow the destination for the selected crate to be the current square of the player.</li></ul><ul><li>Other miscellaneous bugs during this process:</li></ul><ul><li>2 cases of switching x and y when indexing</li><li>A bug in the debug UI had me chasing my tail. I generate the plan as a list but then turn it into an array when animating it. My debug UI was trying to use the list as an array, and Lua of course doesn't forbid that, everything is a table.</li><li>1 field name mismatch. Everything is a table strikes again.</li></ul><p>By the end this is nowhere near as elegant as my original insight. BFS #2 isn't quite a BFS because the queue is a priority queue, and it's not using BFS #1 unmodified. All in all, the solver for moving a crate takes 200+ lines of code. Might not actually be a worthwhile trade-off. Might make the puzzles too easy. Also, I notice now that level 64 requires moving multiple crates on the way down, so this isn't really improving my life very much at least in this level. We'll see..</p>
</div> <div class="attachments"></div> <div class="files"></div></div><div id="2024-03-14T15:59:53.822Z" class="reply"><span class="user">Ivan Reese</span> <a href="./?fromDate=2024-03-11&amp;toDate=2024-03-17&amp;channel=devlog-together&amp;filter=#2024-03-14T15:59:53.822Z" class="date">2024-03-14 15:59:53</a> <div class="message"><p>"Might make the puzzles too easy" ‚Äî that's something you can lean into. Zach Gage is a fantastic game designer. One way he works is by taking a classic game (like, say, Sudoku) and building a new interface for the game that makes people "better" at it by reducing inessential complexity. In his game Good Sudoku, the interface helps you avoid making mistakes and quickly test out theories and skip over tedious bits, but it doesn't do anything to  ~<em><em>solve</em></em>~  the puzzle for you. This improved interface means that you can then play more challenging puzzles, which are more satisfying.</p>
</div> <div class="attachments"></div> <div class="files"></div></div></div></div>
    </div>
  </body>
</html>
